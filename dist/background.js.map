{"version":3,"file":"background.js","mappings":";;;;AAAA;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA","sources":["webpack://timer-extension/./src/background/background.js"],"sourcesContent":["let timerRunning = false;\n\nfunction updateTimer() {\n  chrome.storage.local.get(['timeLeft', 'isRunning'], (result) => {\n    if (result.isRunning && result.timeLeft > 0) {\n      const newTime = result.timeLeft - 1;\n      chrome.storage.local.set({ timeLeft: newTime });\n    }\n  });\n}\n\nchrome.alarms.onAlarm.addListener((alarm) => {\n  if (alarm.name === 'timerTick') {\n    updateTimer();\n  }\n});\n\nchrome.runtime.onMessage.addListener((message, sender, sendResponse) => {\n  if (message.action === 'startTimer') {\n    timerRunning = true;\n    chrome.alarms.create('timerTick', { periodInMinutes: 1/60 }); // Run every second\n    chrome.storage.local.set({ isRunning: true }); // Ensure isRunning is set in storage\n    updateTimer(); // Start immediately\n  } else if (message.action === 'stopTimer') {\n    timerRunning = false;\n    chrome.alarms.clear('timerTick');\n    chrome.storage.local.set({ isRunning: false }); // Ensure isRunning is updated in storage\n  }\n});\n\n// Initialize alarm if timer was running before\nchrome.storage.local.get(['isRunning', 'timeLeft'], (result) => {\n  if (result.isRunning) {\n    timerRunning = true;\n    chrome.alarms.create('timerTick', { periodInMinutes: 1/60 });\n  }\n  // Initialize timeLeft if not set\n  if (result.timeLeft === undefined) {\n    // chrome.storage.local.set({ timeLeft: 4 * 60 * 60 });\n    chrome.storage.local.set({ timeLeft: 100 });\n  }\n}); \n\n\n"],"names":[],"sourceRoot":""}